# Kisoken2022_C

# これは何?
基礎研C班の制御関係のファイルをぜんぶまとめてるリポジトリ  
esp32(M5Stamp C3)を使ってPCとWi-Fiでつなげて、PCでは和田先生のスクリプトを走らせて、それに対応するようにマイコンのプログラムをつくる。  
日本語苦手…

gitで管理する必要がないようなのも含まれているけれど、後輩のためになったりするかもしれないしならないかもしれないし、みたいな  

## Special Thanks: 和田先生
[和田先生のスクリプト](https://github.com/TakeshiWada1980/Dobot_M1_Control)がなければこの方法は多分思いつきもしなかった気がするので、和田先生にはとても感謝しています。この場を借りてお礼申し上げます。

# What's inside

## Blockly
PoCとして、UIFlowを使って和田先生のスクリプトと通信させてみるテストをした。UIFlowはBlocklyというブロックプログラミング環境を使用してM5Stack製品のプログラムを作成できるサービスなのだけれど、UIFlowはネイティブではソケット通信をサポートしないので、カスタムブロック機能を使用してソケット通信のブロックを作成した。  
+ TCP_Blockly  
そのカスタムブロックのバージョン1で、送信のみ可能
+ TCP_Blockly_recv  
バージョン2で、帰ってきたステータスを確認するくらいの受信もできる。たぶんちゃんと公開したらそれなりの人の役に立つはず？

## M5stamp
m5stampのプログラムが入るはず。今は空っぽ。
## M5stick
M5StickC Plusのプログラムが入ってる。Blocklyのやつもあるし、PoCをc++で書き直して実物で試す用のコードも入ってる。なぜM5StickC Plusなのかというと、ひとつには机の上にあったからで、もう一つにはfeature-richだから。バッテリーと液晶とそれをすごく楽に操作できるライブラリがあるので、こういうのに向いてると思うのです。
+ kisokenC  
PoCをc++で書き直して実物で試す用のコード
+ acc_test.m5f  
UIFlowに慣れるために加速度センサであそんでた遊んでたやつ。
+ Dobot_BareTest.m5f   
和田先生のスクリプトのコマンド形式でパケットを投げつけるやつ。TCP_Blockly_recvに依存してるので、それを先にインポートしないと読めない。
+ TCP_Test.m5f  
PoCに実際に使用したやつ。TCP_Blocklyに依存してる。
## TestScripts
和田先生のスクリプトを、PoCに使えるように、コマンド形式が違う～っていうエラーを出す機能を無効化したやつ。~~たぶんもう使わない~~
+ ConnectionChecker.py  
ほとんど和田先生のスクリプトそのまま。権利的にはすごくあやしい。
# to do:
動くようにする

# 付録: 基礎研とは？
僕の通っている大阪公立大学工業高等専門学校総合工学システム学科メカトロニクスコース4年では、与えられた課題を解決することのできるロボットハンドを作り、高専祭で展示するという風習がある。水曜の午後を作業時間に割り当てられていて、その授業としての名称が基礎研究である。  
Dobot M1というロボットアームの制御と、その先につけるロボットハンドの制御が、基礎研制御班の主な仕事である。ただ、ロボットハンドの制御はサーボモータを動かすくらいなので、現在はロボットアームの制御のほうに重点を置いている。ロボットハンドまだできてないし。